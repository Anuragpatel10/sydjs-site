include ../../mixins/flash-messages

doctype html
html
	head
		if env == 'production' && chartbeat_property && chartbeat_domain
			script.
				var _sf_startpt=(new Date()).getTime()
		
		meta(charset="utf-8")
		meta(name="viewport", content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width")
		
		title Notification Center - SydJS
		link(rel="shortcut icon", href="/favicon.ico", type="image/x-icon")
		link(href="/styles/site.min.css", rel="stylesheet")
		style.
			.confirm-page__logo { display: inline-block; opacity: .25; }
			.confirm-page__logo img { max-width: 100%; }

	body.confirm-page: .site-body
		.container-xs
			.page-intro
				.confirm-page__logo
					img(src='/images/logo-inverted.svg', alt='SydJS', width=155, height=35)
			
			.page-content
				h1 Notification Center
				.tile.ph-2.pv-2.mv-1
					h4 Notifications for Next Meetup
					p.mb-2.text-muted This will go out to all "#{nextMeetup.name}" attendees
					form(method='post', autocomplete='off', novalidate)
						input(type='hidden', name='action', value='notify.subscribers')
						+flash-messages(messages)
						.form-group
							label.sr-only Push Notification
							textarea(name='push', placeholder='Push Notification' rows=2).form-control
						.form-group
							label.sr-only Email Copy
							textarea(name='email', placeholder='Email Copy' rows=5).form-control
						button(type='submit', data-confirm='Are you sure?').js-confirm.btn.btn-primary Send to #{nextMeetup.rsvps.length} attendees
				.tile.ph-2.pv-2
					h4 Notifications for all SydJS subscribers
					form(method='post', autocomplete='off', novalidate)
						input(type='hidden', name='action', value='notify.subscribers')
						+flash-messages(messages)
						.form-group
							label.sr-only Push Notification
							textarea(name='push', placeholder='Push Notification' rows=2).form-control
						.form-group
							label.sr-only Email Copy
							textarea(name='email', placeholder='Email Copy' rows=5).form-control
						button(type='submit', data-confirm='Are you sure?').js-confirm.btn.btn-danger Send to #{subscribersCount} subscribers

	script(src='/js/lib/jquery/jquery-1.10.2.min.js')
	script.
		$('.js-confirm').click(function(e) {
			if ( !confirm( $(this).data('confirm') || 'Are you sure? This cannot be undone.') )
				return e.preventDefault();
		});